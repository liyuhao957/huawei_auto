2025-03-18 09:41:01,889 - QuickAppADBTester - INFO - 启动定时任务模式，每30分钟执行一次测试
2025-03-18 09:41:01,889 - QuickAppADBTester - INFO - 启动快应用ADB测试
2025-03-18 09:41:01,889 - QuickAppADBTester - INFO - 初始化QuickAppADBTester
2025-03-18 09:41:01,889 - QuickAppADBTester - INFO - 确保ADBKeyboard被设置为默认输入法
2025-03-18 09:41:01,889 - QuickAppADBTester - INFO - 检查ADBKeyboard是否已安装
2025-03-18 09:41:02,013 - QuickAppADBTester - INFO - 检测到ADBKeyboard已安装（通过ime list确认）
2025-03-18 09:41:02,165 - QuickAppADBTester - INFO - 当前输入法: com.android.adbkeyboard/.AdbIME
2025-03-18 09:41:02,165 - QuickAppADBTester - INFO - 当前已经是ADBKeyboard输入法，无需切换
2025-03-18 09:41:02,166 - QuickAppADBTester - INFO - 确保屏幕亮起并解锁
2025-03-18 09:41:02,166 - QuickAppADBTester - INFO - 检查屏幕状态
2025-03-18 09:41:02,444 - QuickAppADBTester - INFO - 屏幕状态为熄屏 (mHoldingDisplaySuspendBlocker=false)
2025-03-18 09:41:02,445 - QuickAppADBTester - INFO - 屏幕处于熄屏状态，尝试唤醒
2025-03-18 09:41:02,445 - QuickAppADBTester - INFO - 尝试唤醒屏幕
2025-03-18 09:41:02,445 - QuickAppADBTester - INFO - 使用电源键唤醒
2025-03-18 09:41:02,445 - QuickAppADBTester - INFO - 按下按键: KEYCODE_POWER
2025-03-18 09:41:04,636 - QuickAppADBTester - INFO - 检查屏幕状态
2025-03-18 09:41:04,884 - QuickAppADBTester - INFO - 屏幕状态为亮屏 (mHoldingDisplaySuspendBlocker=true)
2025-03-18 09:41:04,884 - QuickAppADBTester - INFO - 成功唤醒屏幕
2025-03-18 09:41:04,885 - QuickAppADBTester - INFO - 尝试简单解锁屏幕
2025-03-18 09:41:04,885 - QuickAppADBTester - INFO - 滑动: (540, 1663) -> (540, 712)
2025-03-18 09:41:06,322 - QuickAppADBTester - INFO - 按下Home键
2025-03-18 09:41:06,323 - QuickAppADBTester - INFO - 按下按键: KEYCODE_HOME
2025-03-18 09:41:07,523 - QuickAppADBTester - INFO - 成功解锁到桌面
2025-03-18 09:41:07,523 - QuickAppADBTester - INFO - 开始执行所有流程
2025-03-18 09:41:07,523 - QuickAppADBTester - INFO - 确保屏幕处于亮屏状态
2025-03-18 09:41:07,523 - QuickAppADBTester - INFO - 确保屏幕亮起并解锁
2025-03-18 09:41:07,524 - QuickAppADBTester - INFO - 检查屏幕状态
2025-03-18 09:41:07,701 - QuickAppADBTester - INFO - 屏幕状态为亮屏 (mHoldingDisplaySuspendBlocker=true)
2025-03-18 09:41:07,702 - QuickAppADBTester - INFO - 屏幕已处于亮屏状态
2025-03-18 09:41:07,702 - QuickAppADBTester - INFO - 尝试简单解锁屏幕
2025-03-18 09:41:07,702 - QuickAppADBTester - INFO - 滑动: (540, 1663) -> (540, 712)
2025-03-18 09:41:09,099 - QuickAppADBTester - INFO - 按下Home键
2025-03-18 09:41:09,100 - QuickAppADBTester - INFO - 按下按键: KEYCODE_HOME
2025-03-18 09:41:10,341 - QuickAppADBTester - INFO - 成功解锁到桌面
2025-03-18 09:41:10,341 - QuickAppADBTester - INFO - ===== 开始执行流程1: 清除快应用中心数据 =====
2025-03-18 09:41:10,342 - QuickAppADBTester - INFO - 步骤1: 按Home键回到桌面
2025-03-18 09:41:10,342 - QuickAppADBTester - INFO - 按下Home键
2025-03-18 09:41:10,342 - QuickAppADBTester - INFO - 按下按键: KEYCODE_HOME
2025-03-18 09:41:11,422 - QuickAppADBTester - INFO - 步骤2: 打开设置应用
2025-03-18 09:41:11,423 - QuickAppADBTester - INFO - 运行命令: adb shell am start -a android.settings.SETTINGS
2025-03-18 09:41:11,536 - QuickAppADBTester - INFO - 命令输出: Starting: Intent { act=android.settings.SETTINGS }

2025-03-18 09:41:13,542 - QuickAppADBTester - INFO - 步骤3: 点击搜索框
2025-03-18 09:41:13,542 - QuickAppADBTester - INFO - 点击坐标: (276, 515)
2025-03-18 09:41:14,660 - QuickAppADBTester - INFO - 步骤4: 输入'应用和服务'
2025-03-18 09:41:14,661 - QuickAppADBTester - INFO - 输入文本: 应用和服务
2025-03-18 09:41:14,661 - QuickAppADBTester - INFO - 使用ADBKeyboard输入非ASCII文本
2025-03-18 09:41:14,661 - QuickAppADBTester - INFO - 执行命令: adb shell am broadcast -a ADB_INPUT_TEXT --es msg "应用和服务"
2025-03-18 09:41:14,743 - QuickAppADBTester - INFO - 文本输入广播命令成功发送
2025-03-18 09:41:16,748 - QuickAppADBTester - INFO - 步骤5: 点击搜索结果'应用和服务'
2025-03-18 09:41:16,749 - QuickAppADBTester - INFO - 点击坐标: (254, 418)
2025-03-18 09:41:18,905 - QuickAppADBTester - INFO - 步骤6: 点击'应用管理'
2025-03-18 09:41:18,906 - QuickAppADBTester - INFO - 点击坐标: (239, 377)
2025-03-18 09:41:20,983 - QuickAppADBTester - INFO - 步骤7: 点击搜索框
2025-03-18 09:41:20,984 - QuickAppADBTester - INFO - 点击坐标: (239, 354)
2025-03-18 09:41:22,078 - QuickAppADBTester - INFO - 步骤8: 输入'快应用中心'
2025-03-18 09:41:22,079 - QuickAppADBTester - INFO - 输入文本: 快应用中心
2025-03-18 09:41:22,079 - QuickAppADBTester - INFO - 使用ADBKeyboard输入非ASCII文本
2025-03-18 09:41:22,079 - QuickAppADBTester - INFO - 执行命令: adb shell am broadcast -a ADB_INPUT_TEXT --es msg "快应用中心"
2025-03-18 09:41:22,144 - QuickAppADBTester - INFO - 文本输入广播命令成功发送
2025-03-18 09:41:24,151 - QuickAppADBTester - INFO - 步骤9: 点击搜索结果'快应用中心'
2025-03-18 09:41:24,152 - QuickAppADBTester - INFO - 点击坐标: (261, 574)
2025-03-18 09:41:26,316 - QuickAppADBTester - INFO - 步骤10: 向上滑动显示更多内容
2025-03-18 09:41:26,318 - QuickAppADBTester - INFO - 滑动: (490, 1900) -> (490, 950)
2025-03-18 09:41:27,731 - QuickAppADBTester - INFO - 滑动: (490, 1663) -> (490, 712)
2025-03-18 09:41:29,197 - QuickAppADBTester - INFO - 步骤11: 点击'存储'
2025-03-18 09:41:29,198 - QuickAppADBTester - INFO - 点击坐标: (156, 1021)
2025-03-18 09:41:30,361 - QuickAppADBTester - INFO - 步骤12: 点击'删除数据'
2025-03-18 09:41:30,361 - QuickAppADBTester - INFO - 点击坐标: (555, 1271)
2025-03-18 09:41:31,463 - QuickAppADBTester - INFO - 步骤13: 点击确认对话框中的'确定'按钮
2025-03-18 09:41:31,464 - QuickAppADBTester - INFO - 点击坐标: (757, 2214)
2025-03-18 09:41:33,638 - QuickAppADBTester - INFO - 流程1执行完成: 清除快应用中心数据
2025-03-18 09:41:33,640 - QuickAppADBTester - INFO - ===== 开始执行流程2: 通过应用市场管理快应用 =====
2025-03-18 09:41:33,640 - QuickAppADBTester - INFO - 步骤1: 按Home键回到桌面
2025-03-18 09:41:33,640 - QuickAppADBTester - INFO - 按下Home键
2025-03-18 09:41:33,640 - QuickAppADBTester - INFO - 按下按键: KEYCODE_HOME
2025-03-18 09:41:34,798 - QuickAppADBTester - INFO - 步骤2: 打开应用市场
2025-03-18 09:41:34,799 - QuickAppADBTester - INFO - 运行命令: adb shell am start -n com.huawei.appmarket/.MainActivity
2025-03-18 09:41:34,909 - QuickAppADBTester - INFO - 命令输出: Starting: Intent { cmp=com.huawei.appmarket/.MainActivity }

2025-03-18 09:41:39,914 - QuickAppADBTester - INFO - 步骤3: 点击'我的'选项卡
2025-03-18 09:41:39,915 - QuickAppADBTester - INFO - 点击坐标: (965, 2247)
2025-03-18 09:41:42,127 - QuickAppADBTester - INFO - 步骤4: 点击'快应用管理'选项
2025-03-18 09:41:42,128 - QuickAppADBTester - INFO - 点击坐标: (171, 1653)
2025-03-18 09:41:47,267 - QuickAppADBTester - INFO - 步骤5: 检查并点击'同意'按钮(如果出现)
2025-03-18 09:41:47,268 - QuickAppADBTester - INFO - 点击坐标: (735, 2226)
2025-03-18 09:41:49,422 - QuickAppADBTester - INFO - 等待应用市场稳定 (5秒)
2025-03-18 09:41:54,425 - QuickAppADBTester - INFO - 流程2执行完成: 通过应用市场管理快应用
2025-03-18 09:41:54,425 - QuickAppADBTester - INFO - ===== 开始执行流程3: 搜索并打开快应用进行测试 =====
2025-03-18 09:41:54,426 - QuickAppADBTester - INFO - 步骤1: 点击搜索框
2025-03-18 09:41:54,426 - QuickAppADBTester - INFO - 点击坐标: (326, 354)
2025-03-18 09:41:55,613 - QuickAppADBTester - INFO - 步骤2: 输入'优购'
2025-03-18 09:41:55,613 - QuickAppADBTester - INFO - 输入文本: 优购
2025-03-18 09:41:55,614 - QuickAppADBTester - INFO - 使用ADBKeyboard输入非ASCII文本
2025-03-18 09:41:55,614 - QuickAppADBTester - INFO - 执行命令: adb shell am broadcast -a ADB_INPUT_TEXT --es msg "优购"
2025-03-18 09:41:55,698 - QuickAppADBTester - INFO - 文本输入广播命令成功发送
2025-03-18 09:41:57,708 - QuickAppADBTester - INFO - 步骤3: 按下回车键
2025-03-18 09:41:57,709 - QuickAppADBTester - INFO - 按下回车键
2025-03-18 09:41:57,709 - QuickAppADBTester - INFO - 按下按键: 66
2025-03-18 09:42:00,003 - QuickAppADBTester - INFO - 步骤4: 点击搜索结果旁边的'打开'按钮
2025-03-18 09:42:00,003 - QuickAppADBTester - INFO - 点击坐标: (860, 370)
2025-03-18 09:42:08,157 - QuickAppADBTester - INFO - 步骤5: 准备执行10次侧滑
2025-03-18 09:42:08,158 - QuickAppADBTester - INFO - 步骤6: 执行10次侧滑操作
2025-03-18 09:42:08,158 - QuickAppADBTester - INFO - 第1次侧滑
2025-03-18 09:42:08,158 - QuickAppADBTester - INFO - 滑动: (1058, 1188) -> (950, 1188)
2025-03-18 09:42:08,459 - QuickAppADBTester - INFO - 第2次侧滑
2025-03-18 09:42:08,460 - QuickAppADBTester - INFO - 滑动: (1058, 1188) -> (950, 1188)
2025-03-18 09:42:08,697 - QuickAppADBTester - INFO - 第3次侧滑
2025-03-18 09:42:08,698 - QuickAppADBTester - INFO - 滑动: (1058, 1188) -> (950, 1188)
2025-03-18 09:42:08,927 - QuickAppADBTester - INFO - 第4次侧滑
2025-03-18 09:42:08,928 - QuickAppADBTester - INFO - 滑动: (1058, 1188) -> (950, 1188)
2025-03-18 09:42:09,149 - QuickAppADBTester - INFO - 第5次侧滑
2025-03-18 09:42:09,150 - QuickAppADBTester - INFO - 滑动: (1058, 1188) -> (950, 1188)
2025-03-18 09:42:09,362 - QuickAppADBTester - INFO - 第6次侧滑
2025-03-18 09:42:09,363 - QuickAppADBTester - INFO - 滑动: (1058, 1188) -> (950, 1188)
2025-03-18 09:42:09,599 - QuickAppADBTester - INFO - 第7次侧滑
2025-03-18 09:42:09,600 - QuickAppADBTester - INFO - 滑动: (1058, 1188) -> (950, 1188)
2025-03-18 09:42:09,841 - QuickAppADBTester - INFO - 第8次侧滑
2025-03-18 09:42:09,842 - QuickAppADBTester - INFO - 滑动: (1058, 1188) -> (950, 1188)
2025-03-18 09:42:10,102 - QuickAppADBTester - INFO - 第9次侧滑
2025-03-18 09:42:10,103 - QuickAppADBTester - INFO - 滑动: (1058, 1188) -> (950, 1188)
2025-03-18 09:42:10,441 - QuickAppADBTester - INFO - 第10次侧滑
2025-03-18 09:42:10,442 - QuickAppADBTester - INFO - 滑动: (1058, 1188) -> (950, 1188)
2025-03-18 09:42:12,667 - QuickAppADBTester - INFO - 步骤7: 检查当前应用
2025-03-18 09:42:12,668 - QuickAppADBTester - INFO - 检查快应用是否在前台运行
2025-03-18 09:42:12,668 - QuickAppADBTester - INFO - 运行命令: adb shell "dumpsys activity activities | grep -A 1 'mResumedActivity'"
2025-03-18 09:42:12,822 - QuickAppADBTester - INFO - 命令输出:     mResumedActivity: ActivityRecord{9a812ba u0 com.huawei.fastapp/.app.processManager.RpkLoaderActivityEntry0 t189}
    * Task{2c3a8c8 #189 type=standard A=10148:com.huawei.fastapp.app.launcher0 U=0 visible=true mode=fullscreen translucent=false sz=1}

2025-03-18 09:42:12,823 - QuickAppADBTester - INFO - ✅ 检测到华为快应用正在前台运行
2025-03-18 09:42:12,823 - QuickAppADBTester - INFO - 侧滑拦截成功：快应用仍在前台运行
2025-03-18 09:42:12,823 - QuickAppADBTester - INFO - 步骤8: 截图记录侧滑后状态
2025-03-18 09:42:12,823 - QuickAppADBTester - INFO - 截图: screenshots/after_swipe_20250318_094212.png
2025-03-18 09:42:14,545 - QuickAppADBTester - INFO - 上传截图到图床: screenshots/after_swipe_20250318_094212.png
2025-03-18 09:42:14,546 - QuickAppADBTester - INFO - 开始上传图片到Stardots空间'huawei': screenshots/after_swipe_20250318_094212.png
2025-03-18 09:42:17,986 - QuickAppADBTester - INFO - 图片上传成功: https://i.stardots.io/huawei/after_swipe_20250318_094212.png
2025-03-18 09:42:17,989 - QuickAppADBTester - INFO - 步骤9: 按Home键
2025-03-18 09:42:17,990 - QuickAppADBTester - INFO - 按下Home键
2025-03-18 09:42:17,990 - QuickAppADBTester - INFO - 按下按键: KEYCODE_HOME
2025-03-18 09:42:28,159 - QuickAppADBTester - INFO - 步骤10: 再次检查当前应用
2025-03-18 09:42:28,160 - QuickAppADBTester - INFO - 检查快应用是否在前台运行
2025-03-18 09:42:28,160 - QuickAppADBTester - INFO - 运行命令: adb shell "dumpsys activity activities | grep -A 1 'mResumedActivity'"
2025-03-18 09:42:28,317 - QuickAppADBTester - INFO - 命令输出:     mResumedActivity: ActivityRecord{9a812ba u0 com.huawei.fastapp/.app.processManager.RpkLoaderActivityEntry0 t189}
    * Task{2c3a8c8 #189 type=standard A=10148:com.huawei.fastapp.app.launcher0 U=0 visible=true mode=fullscreen translucent=false sz=1}

2025-03-18 09:42:28,317 - QuickAppADBTester - INFO - ✅ 检测到华为快应用正在前台运行
2025-03-18 09:42:28,318 - QuickAppADBTester - INFO - 拉回成功：按Home键后快应用仍在前台运行
2025-03-18 09:42:28,318 - QuickAppADBTester - INFO - 步骤11: 再次截图记录按Home后状态
2025-03-18 09:42:28,318 - QuickAppADBTester - INFO - 截图: screenshots/after_home_20250318_094228.png
2025-03-18 09:42:30,083 - QuickAppADBTester - INFO - 上传截图到图床: screenshots/after_home_20250318_094228.png
2025-03-18 09:42:30,084 - QuickAppADBTester - INFO - 开始上传图片到Stardots空间'huawei': screenshots/after_home_20250318_094228.png
2025-03-18 09:42:32,018 - QuickAppADBTester - INFO - 图片上传成功: https://i.stardots.io/huawei/after_home_20250318_094228.png
2025-03-18 09:42:32,021 - QuickAppADBTester - INFO - 流程3执行完成: 搜索并打开快应用进行测试
2025-03-18 09:42:32,022 - QuickAppADBTester - INFO - ===== 开始执行流程4: 清空手机里的全部应用 =====
2025-03-18 09:42:32,022 - QuickAppADBTester - INFO - 步骤1: 强制停止快应用
2025-03-18 09:42:32,023 - QuickAppADBTester - INFO - 运行命令: adb shell am force-stop com.huawei.fastapp
2025-03-18 09:42:32,416 - QuickAppADBTester - INFO - 命令输出: 
2025-03-18 09:42:33,420 - QuickAppADBTester - INFO - 步骤2: 按Home键
2025-03-18 09:42:33,420 - QuickAppADBTester - INFO - 按下Home键
2025-03-18 09:42:33,421 - QuickAppADBTester - INFO - 按下按键: KEYCODE_HOME
2025-03-18 09:42:34,520 - QuickAppADBTester - INFO - 步骤3: 打开最近任务列表
2025-03-18 09:42:34,521 - QuickAppADBTester - INFO - 打开最近任务列表
2025-03-18 09:42:34,521 - QuickAppADBTester - INFO - 按下按键: KEYCODE_APP_SWITCH
2025-03-18 09:42:36,620 - QuickAppADBTester - INFO - 步骤4: 点击底部中间清除按钮
2025-03-18 09:42:36,621 - QuickAppADBTester - INFO - 点击坐标: (540, 2147)
2025-03-18 09:42:37,808 - QuickAppADBTester - INFO - 步骤5: 按Home键回到桌面
2025-03-18 09:42:37,809 - QuickAppADBTester - INFO - 按下Home键
2025-03-18 09:42:37,809 - QuickAppADBTester - INFO - 按下按键: KEYCODE_HOME
2025-03-18 09:42:38,949 - QuickAppADBTester - INFO - 流程4执行完成: 清空手机里的全部应用
2025-03-18 09:42:38,951 - QuickAppADBTester - INFO - 所有流程执行完成。详细结果: {'屏幕唤醒': True, '流程1_清除快应用中心数据': True, '流程2_通过应用市场管理快应用': True, '流程3_防侧滑测试': True, '流程3_拉回测试': True, '流程4_清空手机里的全部应用': True}
2025-03-18 09:42:38,951 - QuickAppADBTester - INFO - 使用交互式卡片消息格式发送，包含2张图片链接
2025-03-18 09:42:38,952 - QuickAppADBTester - INFO - 构建的消息结构: {"msg_type": "interactive", "card": {"config": {"wide_screen_mode": true}, "header": {"title": {"tag": "plain_text", "content": "✅ 快应用自动化测试成功"}, "template": "green"}, "elements": [{"tag": "div", "text": {"tag": "lark_md", "content": "**快应用防侧滑和拉回测试成功完成！**\n\n- 开始时间: 2025-03-18 09:41:07\n- 结束时间: 2025-03-18 09:42:38\n- 测试设备: 华为设备\n\n**✅ 成功执行了所有测试流程:**\n1. 屏幕唤醒: ✅ 成功\n2. 清除快应用中心数据: ✅ 成功\n3. 通过应用市场管理快应用: ✅ 成功\n4. 快应用功能测试: \n   - 防侧滑测试: ✅ 成功\n   - 拉回测试: ✅ 成功\n5. 清空手机里的全部应用: ✅ 成功"}}, {"tag": "hr"}, {"tag": "div", "text": {"tag": "lark_md", "content": "**📷 测试截图：**"}}, {"tag": "action", "actions": [{"tag": "button", "text": {"tag": "plain_text", "content": "防侧滑"}, "type": "primary", "url": "https://i.stardots.io/huawei/after_swipe_20250318_094212.png"}, {"tag": "button", "text": {"tag": "plain_text", "content": "拉回"}, "type": "primary", "url": "https://i.stardots.io/huawei/after_home_20250318_094228.png"}]}, {"tag": "hr"}, {"tag": "note", "elements": [{"tag": "plain_text", "content": "测试时间: 2025-03-18 09:42:38"}]}]}}
2025-03-18 09:42:40,439 - QuickAppADBTester - INFO - 飞书通知发送成功: ✅ 快应用自动化测试成功
2025-03-18 09:42:40,440 - QuickAppADBTester - INFO - 测试完成
2025-03-18 09:42:40,440 - QuickAppADBTester - INFO - 定时任务已启动，按Ctrl+C可停止
